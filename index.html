<!DOCTYPE html>
<html lang="pl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–ò–∑—É—á–µ–Ω–∏–µ –ø–æ–ª—å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ - –ü–∞–¥–µ–∂–∏</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			/* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
			button,
			input,
			.hint-btn {
				-webkit-tap-highlight-color: transparent;
				touch-action: manipulation;
			}

			/* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑—É–º–∞ –Ω–∞ input –≤ iOS */
			input[type='text'] {
				font-size: 16px;
			}

			/* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è WebView Telegram */
			@media (max-width: 768px) {
				body {
					/* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ body –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input */
					position: relative;
					overflow-x: hidden;
				}

				.container {
					/* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
					position: relative;
					min-height: 100vh;
				}

				.input-group {
					/* –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ */
					position: relative;
					z-index: 10;
				}

				.input-group input {
					/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –≤ WebView */
					-webkit-appearance: none;
					border-radius: 10px;
					background: white;
					box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
				}
			}

			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				padding: 20px;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				background: white;
				border-radius: 20px;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
				overflow: hidden;
			}

			.header {
				background: linear-gradient(135deg, #ff6b6b, #ee5a24);
				color: white;
				padding: 30px;
				text-align: center;
			}

			.header h1 {
				font-size: 2.5rem;
				margin-bottom: 10px;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			}

			.header p {
				font-size: 1.2rem;
				opacity: 0.9;
			}

			.controls {
				padding: 30px;
				background: #f8f9fa;
				border-bottom: 1px solid #e9ecef;
			}

			.case-selector {
				display: flex;
				gap: 15px;
				flex-wrap: wrap;
				justify-content: center;
				margin-bottom: 20px;
			}

			.case-btn {
				padding: 12px 24px;
				border: none;
				border-radius: 25px;
				background: #007bff;
				color: white;
				cursor: pointer;
				font-size: 1rem;
				transition: all 0.3s ease;
				box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
			}

			.case-btn:hover {
				background: #0056b3;
				transform: translateY(-2px);
				box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
			}

			/* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
			@media (hover: none) and (pointer: coarse) {
				.case-btn:hover,
				.mixed-btn:hover,
				.hint-btn:hover {
					transform: none;
					box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
				}
			}

			.case-btn.active {
				background: #28a745;
				box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
			}

			.mixed-btn {
				padding: 12px 24px;
				border: none;
				border-radius: 25px;
				background: #007bff;
				color: white;
				cursor: pointer;
				font-size: 1rem;
				transition: all 0.3s ease;
				box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
			}

			.mixed-btn:hover {
				background: #0056b3;
				transform: translateY(-2px);
				box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
			}

			.mixed-btn.active {
				background: #28a745;
				box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
			}

			/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ */
			.case-select {
				display: none;
				width: 100%;
				max-width: 300px;
				padding: 12px 16px;
				border: 2px solid #e9ecef;
				border-radius: 10px;
				background: white;
				font-size: 1rem;
				color: #495057;
				cursor: pointer;
				transition: border-color 0.3s ease;
				appearance: none;
				background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
				background-repeat: no-repeat;
				background-position: right 12px center;
				background-size: 16px;
				padding-right: 40px;
			}

			.case-select:focus {
				outline: none;
				border-color: #007bff;
				box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
			}

			.case-select option {
				padding: 8px;
				font-size: 1rem;
			}

			.exercise-area {
				padding: 40px;
				text-align: center;
			}

			.word-display {
				background: #f8f9fa;
				padding: 30px;
				border-radius: 15px;
				margin-bottom: 20px;
				border: 2px solid #e9ecef;
			}

			.word-display h3 {
				color: #495057;
				margin-bottom: 15px;
				font-size: 1.3rem;
			}

			.words-line {
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 20px;
				flex-wrap: wrap;
				margin-bottom: 15px;
			}

			.word {
				font-size: 1.5rem;
				font-weight: bold;
				color: #007bff;
				padding: 10px 15px;
				background: white;
				border-radius: 10px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			}

			.input-section {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 15px;
				margin-bottom: 20px;
			}

			.input-group {
				text-align: center;
				width: 100%;
				max-width: 600px;
				position: relative;
				margin: 0 auto;
			}

			.input-group label {
				display: block;
				margin-bottom: 8px;
				font-weight: bold;
				color: #495057;
				font-size: 1.1rem;
			}

			.input-group input {
				width: 100%;
				padding: 15px;
				border: 2px solid #e9ecef;
				border-radius: 10px;
				font-size: 1.1rem;
				transition: border-color 0.3s ease;
				text-align: center;
			}

			.input-group input:focus {
				outline: none;
				border-color: #007bff;
				box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
			}

			.error-message {
				color: #dc3545;
				font-size: 0.85rem;
				margin-top: 5px;
				text-align: center;
				display: none;
			}

			.success-message {
				color: #28a745;
				font-size: 0.85rem;
				margin-top: 5px;
				text-align: center;
				display: none;
			}

			.hints-section {
				display: flex;
				gap: 15px;
				justify-content: center;
				margin: 15px 0;
			}

			.hint-btn {
				background: #17a2b8;
				color: white;
				border: none;
				padding: 10px 20px;
				border-radius: 20px;
				cursor: pointer;
				transition: all 0.3s ease;
				position: relative;
			}

			.hint-btn:hover {
				background: #138496;
				transform: translateY(-1px);
			}

			.tooltip {
				position: absolute;
				bottom: 100%;
				left: 50%;
				transform: translateX(-50%);
				background: white;
				color: #333;
				padding: 15px;
				border-radius: 8px;
				font-size: 0.9rem;
				white-space: normal;
				opacity: 0;
				visibility: hidden;
				transition: all 0.3s ease;
				z-index: 99999;
				margin-bottom: 10px;
				box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
				border: 1px solid #dee2e6;
				max-width: 300px;
				min-width: 250px;
				max-height: 60vh;
				overflow-y: auto;
			}

			.tooltip::after {
				content: '';
				position: absolute;
				top: 100%;
				left: 50%;
				transform: translateX(-50%);
				border: 5px solid transparent;
				border-top-color: #333;
			}

			.hint-btn:hover .tooltip {
				opacity: 1;
				visibility: visible;
			}

			/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ tooltip –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
			@media (max-width: 768px) {
				.hint-btn:active .tooltip {
					opacity: 1;
					visibility: visible;
				}
			}

			.result {
				margin: 15px 0;
				padding: 20px;
				border-radius: 10px;
				font-size: 1.1rem;
				display: none;
			}

			.result.correct {
				background: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}

			.result.incorrect {
				background: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}

			/* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è */
			@media (max-width: 768px) {
				body {
					padding: 10px;
				}

				.container {
					border-radius: 15px;
				}

				.header {
					padding: 20px 15px;
				}

				.header h1 {
					font-size: 1.8rem;
					margin-bottom: 8px;
				}

				.header p {
					font-size: 1rem;
				}

				.controls {
					padding: 20px 15px;
				}

				/* –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
				.case-btn,
				.mixed-btn {
					display: none;
				}

				/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ */
				.case-select {
					display: block;
				}

				.case-selector {
					flex-direction: column;
					align-items: center;
					gap: 10px;
				}

				.exercise-area {
					padding: 20px 15px;
				}

				.word-display {
					padding: 20px 15px;
					margin-bottom: 15px;
				}

				.word-display h3 {
					font-size: 1.1rem;
					margin-bottom: 10px;
				}

				.words-line {
					flex-direction: column;
					gap: 8px;
					margin-bottom: 10px;
				}

				.word {
					font-size: 1.2rem;
					padding: 8px 12px;
					width: 100%;
					max-width: 280px;
				}

				.input-group {
					max-width: 100%;
				}

				.input-group input {
					padding: 12px;
					font-size: 1rem;
				}

				.hints-section {
					flex-direction: column;
					align-items: center;
					gap: 10px;
					margin: 10px 0;
				}

				.hint-btn {
					width: 100%;
					max-width: 200px;
					padding: 12px 16px;
					font-size: 0.9rem;
				}

				.tooltip {
					position: fixed;
					bottom: 20px;
					top: auto;
					left: 50%;
					transform: translateX(-50%);
					width: 90%;
					max-width: 350px;
					white-space: normal;
					text-align: center;
					z-index: 99999;
					padding: 20px;
					max-height: 60vh;
					overflow-y: auto;
				}

				.tooltip::after {
					display: none;
				}

				.result {
					padding: 15px;
					font-size: 1rem;
					margin: 10px 0;
				}
			}

			/* –ü–ª–∞–Ω—à–µ—Ç—ã */
			@media (min-width: 769px) and (max-width: 1024px) {
				body {
					padding: 15px;
				}

				.header h1 {
					font-size: 2.2rem;
				}

				.case-selector {
					gap: 12px;
				}

				.case-btn,
				.mixed-btn {
					padding: 14px 22px;
					font-size: 0.98rem;
				}

				.words-line {
					gap: 15px;
				}

				.word {
					font-size: 1.3rem;
				}

				.hints-section {
					gap: 12px;
				}
			}

			/* –ü–ª–∞–Ω—à–µ—Ç—ã - —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ */
			@media (max-width: 1024px) {
				.case-btn,
				.mixed-btn {
					display: none;
				}

				.case-select {
					display: block;
				}
			}

			/* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã */
			@media (max-width: 480px) {
				body {
					padding: 5px;
				}

				.header {
					padding: 15px 10px;
				}

				.header h1 {
					font-size: 1.5rem;
				}

				.header p {
					font-size: 0.9rem;
				}

				.controls {
					padding: 15px 10px;
				}

				.exercise-area {
					padding: 15px 10px;
				}

				.word-display {
					padding: 15px 10px;
				}

				.word {
					font-size: 1.1rem;
					padding: 6px 10px;
				}

				.case-select {
					font-size: 0.9rem;
					padding: 10px 14px;
				}

				.hint-btn {
					padding: 10px 14px;
					font-size: 0.85rem;
				}

				.input-group input {
					padding: 12px;
					font-size: 0.95rem;
					/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
					border: 2px solid #007bff;
					background: #f8f9fa;
				}

				/* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
				.tooltip {
					max-height: 50vh;
					padding: 15px;
				}

				.tooltip table {
					font-size: 9px;
				}

				.tooltip td {
					padding: 1px 3px;
				}
			}

			/* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
			@media (max-width: 768px) and (orientation: landscape) {
				.header {
					padding: 15px;
				}

				.header h1 {
					font-size: 1.6rem;
				}

				.case-selector {
					flex-direction: row;
					flex-wrap: wrap;
					justify-content: center;
				}

				.case-btn {
					width: auto;
					max-width: none;
					flex: 0 0 auto;
				}

				.words-line {
					flex-direction: row;
					flex-wrap: wrap;
					justify-content: center;
				}

				.word {
					width: auto;
					max-width: none;
				}

				.hints-section {
					flex-direction: row;
					flex-wrap: wrap;
					justify-content: center;
				}

				.hint-btn {
					width: auto;
					max-width: none;
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>üáµüá± –ò–∑—É—á–µ–Ω–∏–µ –ø–æ–ª—å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</h1>
				<p>
					–í–∞–º –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –≥–ª–∞–≥–æ–ª, –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ –∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –≤ –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤–µ. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–∞–¥–µ–∂ –ø–æ
					–≥–ª–∞–≥–æ–ª—É –∏ –≤–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è–º–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ.
				</p>
			</div>

			<div class="controls">
				<div class="case-selector">
					<select class="case-select" id="caseSelect">
						<option value="mixed" selected>üîÑ –ò–∑—É—á–∞—Ç—å –≤—Å–µ –ø–∞–¥–µ–∂–∏ –≤ –ø–µ—Ä–µ–º–µ—à–∫—É</option>
						<option value="dopelniacz">Dope≈Çniacz (–†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)</option>
						<option value="celownik">Celownik (–î–∞—Ç–µ–ª—å–Ω—ã–π)</option>
						<option value="biernik">Biernik (–í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π)</option>
						<option value="narzednik">Narzƒôdnik (–¢–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π)</option>
						<option value="miejscownik">Miejscownik (–ú–µ—Å—Ç–Ω—ã–π)</option>
						<option value="wolacz">Wo≈Çacz (–ó–≤–∞—Ç–µ–ª—å–Ω—ã–π)</option>
					</select>
					<button class="case-btn" data-case="dopelniacz">Dope≈Çniacz (–†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)</button>
					<button class="case-btn" data-case="celownik">Celownik (–î–∞—Ç–µ–ª—å–Ω—ã–π)</button>
					<button class="case-btn" data-case="biernik">Biernik (–í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π)</button>
					<button class="case-btn" data-case="narzednik">Narzƒôdnik (–¢–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π)</button>
					<button class="case-btn" data-case="miejscownik">Miejscownik (–ú–µ—Å—Ç–Ω—ã–π)</button>
					<button class="case-btn" data-case="wolacz">Wo≈Çacz (–ó–≤–∞—Ç–µ–ª—å–Ω—ã–π)</button>
					<button class="mixed-btn" id="mixedBtn">üîÑ –ò–∑—É—á–∞—Ç—å –≤—Å–µ –ø–∞–¥–µ–∂–∏ –≤ –ø–µ—Ä–µ–º–µ—à–∫—É</button>
				</div>
			</div>

			<div class="exercise-area">
				<div class="word-display" id="wordDisplay" style="display: none">
					<div class="words-line">
						<div class="word" id="verb">–ì–ª–∞–≥–æ–ª</div>
						<div class="word" id="adjective">–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ</div>
						<div class="word" id="noun">–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ</div>
					</div>
					<div class="input-group">
						<input type="text" id="answerInput" placeholder="" />
						<div class="error-message" id="errorMessage"></div>
						<div class="success-message" id="successMessage"></div>
					</div>
				</div>

				<div class="hints-section" id="hintsSection" style="display: none">
					<button class="hint-btn" id="caseHintBtn">
						üí° –ü–∞–¥–µ–∂
						<div class="tooltip" id="caseTooltip">–ù–∞–≤–µ–¥–∏—Ç–µ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏</div>
					</button>
					<button class="hint-btn" id="questionHintBtn">
						‚ùì –í–æ–ø—Ä–æ—Å
						<div class="tooltip" id="questionTooltip">–ù–∞–≤–µ–¥–∏—Ç–µ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏</div>
					</button>
					<button class="hint-btn" id="ruleHintBtn">
						üìö –ü—Ä–∞–≤–∏–ª–æ
						<div class="tooltip" id="ruleTooltip">–ù–∞–≤–µ–¥–∏—Ç–µ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏</div>
					</button>
				</div>

				<div class="result" id="result"></div>
			</div>
		</div>

		<script src="words-database.js"></script>
		<script>
			let currentCase = null;
			let isMixedMode = false;
			let availableWords = [];
			let currentAttempts = 0;
			let stats = {
				correct: 0,
				incorrect: 0,
				total: 0
			};

			// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
			document.addEventListener('DOMContentLoaded', function () {
				initializeApp();
			});

			function initializeApp() {
				// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–∞–¥–µ–∂–µ–π
				document.querySelectorAll('.case-btn').forEach((btn) => {
					btn.addEventListener('click', function () {
						selectCase(this.dataset.case);
					});
				});

				// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
				document.getElementById('mixedBtn').addEventListener('click', selectMixedMode);

				// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
				document.getElementById('caseSelect').addEventListener('change', function () {
					const selectedCase = this.value;
					if (selectedCase) {
						if (selectedCase === 'mixed') {
							selectMixedMode();
						} else {
							selectCase(selectedCase);
						}
						// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ —Å–º–µ—à–∞–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
						this.value = 'mixed';
					}
				});

				// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
				selectMixedMode();
			}

			function selectCase(caseName) {
				// –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
				document.querySelectorAll('.case-btn').forEach((btn) => {
					btn.classList.remove('active');
				});
				document.getElementById('mixedBtn').classList.remove('active');

				// –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
				document.querySelector(`[data-case="${caseName}"]`).classList.add('active');

				// –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
				const caseSelect = document.getElementById('caseSelect');
				if (caseSelect) {
					caseSelect.value = '';
				}

				currentCase = caseName;
				isMixedMode = false;
				currentAttempts = 0;

				// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–¥–µ–∂–∞
				availableWords = [...extendedWordDatabase[caseName].examples];
				shuffleArray(availableWords);

				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
				showExercise();
			}

			function selectMixedMode() {
				// –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –ø–∞–¥–µ–∂–µ–π
				document.querySelectorAll('.case-btn').forEach((btn) => {
					btn.classList.remove('active');
				});

				// –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –∫–Ω–æ–ø–∫–µ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
				document.getElementById('mixedBtn').classList.add('active');

				// –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
				const caseSelect = document.getElementById('caseSelect');
				if (caseSelect) {
					caseSelect.value = 'mixed';
				}

				isMixedMode = true;
				currentCase = null;
				currentAttempts = 0;

				// –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Å–ª–æ–≤ –∏–∑ –≤—Å–µ—Ö –ø–∞–¥–µ–∂–µ–π
				availableWords = [];
				Object.keys(extendedWordDatabase).forEach((caseName) => {
					extendedWordDatabase[caseName].examples.forEach((word) => {
						availableWords.push({
							...word,
							caseName: caseName,
							caseInfo: extendedWordDatabase[caseName]
						});
					});
				});

				// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ª–æ–≤–∞
				shuffleArray(availableWords);

				showExercise();
			}

			function shuffleArray(array) {
				const shuffled = [...array];
				for (let i = shuffled.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
				}
				return shuffled;
			}

			let currentWord = null; // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞

			function showExercise() {
				if (availableWords.length === 0) {
					// –ï—Å–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞ –ø—Ä–æ–π–¥–µ–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª
					if (isMixedMode) {
						// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤—Å–µ —Å–ª–æ–≤–∞ –∑–∞–Ω–æ–≤–æ
						Object.keys(extendedWordDatabase).forEach((caseName) => {
							extendedWordDatabase[caseName].examples.forEach((word) => {
								availableWords.push({
									...word,
									caseName: caseName,
									caseInfo: extendedWordDatabase[caseName]
								});
							});
						});
						shuffleArray(availableWords);
						alert('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞. –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª! üéä');
					} else {
						// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ª–æ–≤–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–¥–µ–∂–∞ –∑–∞–Ω–æ–≤–æ
						availableWords = [...extendedWordDatabase[currentCase].examples];
						shuffleArray(availableWords);
						alert('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø–∞–¥–µ–∂–∞. –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª! üéä');
					}
				}

				// –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
				const randomIndex = Math.floor(Math.random() * availableWords.length);
				currentWord = availableWords[randomIndex]; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
				const caseData = isMixedMode ? currentWord.caseInfo : extendedWordDatabase[currentCase];

				document.getElementById('verb').textContent = currentWord.verb;
				document.getElementById('adjective').textContent = currentWord.adjective;
				document.getElementById('noun').textContent = currentWord.noun;

				// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
				updateHints(currentWord, caseData);

				// –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –∏ —É—Å–ø–µ—Ö–µ
				document.getElementById('errorMessage').style.display = 'none';
				document.getElementById('successMessage').style.display = 'none';

				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫
				currentAttempts = 0;

				document.getElementById('wordDisplay').style.display = 'block';
				document.getElementById('hintsSection').style.display = 'flex';
				document.getElementById('result').style.display = 'none';

				// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–∞–≥–æ–ª –∫–∞–∫ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å –ø—Ä–æ–±–µ–ª–æ–º –ø–æ—Å–ª–µ
				document.getElementById('answerInput').value = currentWord.verb + ' ';
				document.getElementById('answerInput').focus();

				// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ–ª—é –≤–≤–æ–¥–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
				setTimeout(() => {
					document.getElementById('answerInput').scrollIntoView({
						behavior: 'smooth',
						block: 'center'
					});
				}, 100);
			}

			function updateHints(currentWord, caseData) {
				// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–∞–¥–µ–∂–∞
				document.getElementById('caseTooltip').textContent = caseData.name;

				// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –≤–æ–ø—Ä–æ—Å–∞ (–≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–ª—å—Å–∫–æ–º)
				document.getElementById('questionTooltip').textContent = getCaseQuestions(caseData.name);

				// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∞–≤–∏–ª–∞ (–æ–∫–æ–Ω—á–∞–Ω–∏—è) - –∏—Å–ø–æ–ª—å–∑—É–µ–º innerHTML –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
				document.getElementById('ruleTooltip').innerHTML = getCaseEndings(caseData.name);
			}

			function getCaseQuestions(caseName) {
				// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–ª—å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–¥–µ–∂–∞ (–¥–æ —Å–∫–æ–±–∫–∏)
				const polishCaseName = caseName.split(' (')[0];

				const questions = {
					Dope≈Çniacz: 'Kogo? Czego?',
					Celownik: 'Komu? Czemu?',
					Biernik: 'Kogo? Co?',
					Narzƒôdnik: 'Kim? Czym?',
					Miejscownik: 'O kim? O czym?',
					Wo≈Çacz: 'O!'
				};

				return questions[polishCaseName] || '–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∞–¥–µ–∂–∞';
			}

			function getCaseEndings(caseName) {
				// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–ª—å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–¥–µ–∂–∞ (–¥–æ —Å–∫–æ–±–∫–∏)
				const polishCaseName = caseName.split(' (')[0];

				const caseEndings = {
					Dope≈Çniacz: {
						title: 'Dope≈Çniacz (–†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)',
						questions: 'kogo? czego?',
						singular: {
							masculine: '-a, -u',
							feminine: '-y, -i',
							neuter: '-a, -u'
						},
						plural: {
							masculine: '-√≥w, -i',
							feminine: '-',
							neuter: '-√≥w, -'
						}
					},
					Celownik: {
						title: 'Celownik (–î–∞—Ç–µ–ª—å–Ω—ã–π)',
						questions: 'komu? czemu?',
						singular: {
							masculine: '-owi, -u',
							feminine: '-ej, -y',
							neuter: '-u'
						},
						plural: {
							masculine: '-om',
							feminine: '-om',
							neuter: '-om'
						}
					},
					Biernik: {
						title: 'Biernik (–í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π)',
						questions: 'kogo? co?',
						singular: {
							masculine: '-a, -',
							feminine: '-ƒô, -',
							neuter: '-o, -e'
						},
						plural: {
							masculine: '-√≥w, -y',
							feminine: '-y, -e',
							neuter: '-a, -e'
						}
					},
					Narzƒôdnik: {
						title: 'Narzƒôdnik (–¢–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π)',
						questions: 'kim? czym?',
						singular: {
							masculine: '-em',
							feminine: '-ƒÖ',
							neuter: '-em'
						},
						plural: {
							masculine: '-ami',
							feminine: '-ami',
							neuter: '-ami'
						}
					},
					Miejscownik: {
						title: 'Miejscownik (–ú–µ—Å—Ç–Ω—ã–π)',
						questions: 'o kim? o czym?',
						singular: {
							masculine: '-ie, -u',
							feminine: '-ie, -y',
							neuter: '-ie, -u'
						},
						plural: {
							masculine: '-ach',
							feminine: '-ach',
							neuter: '-ach'
						}
					},
					Wo≈Çacz: {
						title: 'Wo≈Çacz (–ó–≤–∞—Ç–µ–ª—å–Ω—ã–π)',
						questions: 'O!',
						singular: {
							masculine: '-e, -u',
							feminine: '-o, -y',
							neuter: '-o, -e'
						},
						plural: {
							masculine: '-owie, -y',
							feminine: '-y',
							neuter: '-a'
						}
					}
				};

				const caseData = caseEndings[polishCaseName];
				if (!caseData) return '–û–∫–æ–Ω—á–∞–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∞–¥–µ–∂–∞';

				return `
					<div style="font-size: 12px; line-height: 1.3;">
						<div style="font-weight: bold; margin-bottom: 8px; color: #007bff;">${caseData.title}</div>
						<div style="margin-bottom: 8px; font-style: italic;">${caseData.questions}</div>
						<table style="border-collapse: collapse; width: 100%; font-size: 11px;">
							<tr style="background: #f8f9fa; border: 1px solid #dee2e6;">
								<td style="padding: 4px; border: 1px solid #dee2e6; font-weight: bold;">–†–æ–¥</td>
								<td style="padding: 4px; border: 1px solid #dee2e6; font-weight: bold;">–ï–¥. —á–∏—Å–ª–æ</td>
								<td style="padding: 4px; border: 1px solid #dee2e6; font-weight: bold;">–ú–Ω. —á–∏—Å–ª–æ</td>
							</tr>
							<tr style="border: 1px solid #dee2e6;">
								<td style="padding: 4px; border: 1px solid #dee2e6;">–ú—É–∂—Å–∫–æ–π</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.singular.masculine}</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.plural.masculine}</td>
							</tr>
							<tr style="background: #f8f9fa; border: 1px solid #dee2e6;">
								<td style="padding: 4px; border: 1px solid #dee2e6;">–ñ–µ–Ω—Å–∫–∏–π</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.singular.feminine}</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.plural.feminine}</td>
							</tr>
							<tr style="border: 1px solid #dee2e6;">
								<td style="padding: 4px; border: 1px solid #dee2e6;">–°—Ä–µ–¥–Ω–∏–π</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.singular.neuter}</td>
								<td style="padding: 4px; border: 1px solid #dee2e6;">${caseData.plural.neuter}</td>
							</tr>
						</table>
					</div>
				`;
			}

			function checkAnswer() {
				const answerInput = document.getElementById('answerInput').value.trim().toLowerCase();

				// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é currentWord
				const caseData = isMixedMode ? currentWord.caseInfo : extendedWordDatabase[currentCase];

				// –£–±–∏—Ä–∞–µ–º –≥–ª–∞–≥–æ–ª –∏–∑ –Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
				const answerWithoutVerb = answerInput.replace(currentWord.verb.toLowerCase() + ' ', '').trim();
				const correctAnswer = `${currentWord.adjAnswer} ${currentWord.nounAnswer}`.toLowerCase();
				const isCorrect = answerWithoutVerb === correctAnswer;

				if (isCorrect) {
					stats.correct++;

					// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
					const successMessage = document.getElementById('successMessage');
					successMessage.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üéâ';
					successMessage.style.display = 'block';

					// –£–¥–∞–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—á–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
					const wordIndex = availableWords.findIndex((word) => word === currentWord);
					if (wordIndex !== -1) {
						availableWords.splice(wordIndex, 1);
					}

					// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
					setTimeout(() => {
						nextWord();
					}, 1000);
				} else {
					currentAttempts++;
					stats.incorrect++;

					// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
					const errorMessage = document.getElementById('errorMessage');
					errorMessage.textContent = `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—ã—Ç–∫–∞ ${currentAttempts} –∏–∑ 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!`;
					errorMessage.style.display = 'block';

					if (currentAttempts >= 3) {
						// –ü–æ—Å–ª–µ 3-–π –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
						const errorMessage = document.getElementById('errorMessage');
						errorMessage.innerHTML = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <strong>${currentWord.adjAnswer} ${currentWord.nounAnswer}</strong><br>–ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É`;
						errorMessage.style.display = 'block';
					}
				}

				stats.total++;
			}

			function showResult(message, type) {
				const resultDiv = document.getElementById('result');
				resultDiv.innerHTML = message;
				resultDiv.className = `result ${type}`;
				resultDiv.style.display = 'block';

				// –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –∏ —É—Å–ø–µ—Ö–µ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
				document.getElementById('errorMessage').style.display = 'none';
				document.getElementById('successMessage').style.display = 'none';
			}

			function nextWord() {
				showExercise();
			}

			// –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Enter –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
			document.addEventListener('keypress', function (e) {
				if (e.key === 'Enter') {
					if (currentAttempts >= 3) {
						// –ü–æ—Å–ª–µ 3-—Ö –æ—à–∏–±–æ–∫ Enter –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É
						nextWord();
					} else {
						// –ò–Ω–∞—á–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
						checkAnswer();
					}
				}
			});

			// –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–ª–∏–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
			document.addEventListener('click', function (e) {
				// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –∫–ª–∏–∫ –ø–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
				if (
					currentAttempts >= 3 &&
					!e.target.closest('.hint-btn') &&
					!e.target.closest('#answerInput') &&
					!e.target.closest('.case-btn') &&
					!e.target.closest('.mixed-btn') &&
					!e.target.closest('.case-select') &&
					!e.target.closest('.tooltip')
				) {
					nextWord();
				}
			});

			// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ–ª—é –≤–≤–æ–¥–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
			document.getElementById('answerInput').addEventListener('focus', function () {
				setTimeout(() => {
					this.scrollIntoView({
						behavior: 'smooth',
						block: 'center',
						inline: 'nearest'
					});
				}, 300);
			});
		</script>
	</body>
</html>
